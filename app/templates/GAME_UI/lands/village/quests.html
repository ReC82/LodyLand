{% extends "game_base.html" %}

{% block extra_css %}
  <!-- Global land styles -->
  <link rel="stylesheet" href="{{ url_for('static', filename='GAME_UI/css/lands.css') }}">
  <!-- Shared Village layout (NPC grid, land header) -->
  <link rel="stylesheet" href="{{ url_for('static', filename='GAME_UI/css/lands/village/village.css') }}">
  <!-- Village quests styles -->
  <link rel="stylesheet" href="{{ url_for('static', filename='GAME_UI/css/lands/village/quests.css') }}">
{% endblock %}

{% block title %}Quêtes du Village — LodyLand{% endblock %}

{% block content %}
<div class="village-quests-wrapper">

  <!-- ============================================================
       Page Header
       ============================================================ -->
  <header class="village-quests-header mb-4">
    <h1 class="h3 mb-1">Quêtes du Village</h1>
    <p class="text-muted mb-0">
      Discute avec le donneur de quêtes pour recevoir ta quête quotidienne
      et découvrir des missions spéciales.
    </p>
  </header>


  <!-- ============================================================
       Layout : left = daily/special quests, right = active quests
       ============================================================ -->
  <div class="village-quests-layout">

    <!-- ============================================================
         LEFT COLUMN — Daily Quest + Available Quests
         ============================================================ -->
    <section class="village-quests-main">

      <!-- Daily Quest Block -->
      <div class="vq-card mb-3">
        <h2 class="h5 mb-2">Ta quête quotidienne</h2>

        {% if daily_quest %}
          <!-- Currently only placeholders (UI only) -->
          <p><strong>{{ daily_quest.title }}</strong></p>
          <p class="text-muted small mb-2">{{ daily_quest.description }}</p>

          <p class="mb-2">
            Objectif : {{ daily_quest.objective_text }}<br />
            Récompense :
            <span class="ui-icon ui-icon-coin"></span>
            {{ daily_quest.reward_coins or 0 }}

            {% if daily_quest.reward_diams %}
              · <span class="ui-icon ui-icon-diam"></span>
              {{ daily_quest.reward_diams }}
            {% endif %}
          </p>

        {% else %}
          <p class="text-muted mb-1">
            Aucune quête quotidienne active pour le moment.
          </p>
          <p class="small text-muted mb-0">
            Plus tard : tu pourras venir ici chaque jour pour accepter une nouvelle quête.
          </p>
        {% endif %}
      </div>


      <!-- Available Special Quests -->
      <div class="vq-card mb-3">
        <h2 class="h5 mb-2">Quêtes disponibles aujourd'hui</h2>

        {% if available_quests %}
          <ul class="list-unstyled mb-0">
            {% for q in available_quests %}
              <li class="vq-quest-line">
                <div>
                  <strong>{{ q.title }}</strong><br />
                  <span class="text-muted small">{{ q.description }}</span>
                </div>

                <!-- Later: accepting quests -->
                <button class="btn btn-sm btn-outline-primary" disabled>
                  Accepter (WIP)
                </button>
              </li>
            {% endfor %}
          </ul>

        {% else %}
          <p class="text-muted mb-0">
            Pour l’instant, aucune quête spéciale n’est disponible.
            Cette section sera remplie lorsque la logique des quêtes du Village sera activée.
          </p>
        {% endif %}
      </div>

    </section>


    <!-- ============================================================
         RIGHT COLUMN — Active Quests
         ============================================================ -->
    <aside class="village-quests-sidebar">
      <div class="vq-card">
        <h2 class="h6 mb-2">Tes quêtes actives</h2>

        {% if active_quests %}
          <ul class="list-unstyled mb-0 vq-active-list">
            {% for q in active_quests %}
              <li class="vq-active-line">
                <div>
                  <strong>{{ q.title }}</strong><br />
                  <span class="text-muted small">
                    Progression : {{ q.progress_current }}/{{ q.progress_target }}
                  </span>
                </div>
                <!-- Later: abandon / track -->
              </li>
            {% endfor %}
          </ul>

        {% else %}
          <p class="text-muted mb-0 small">
            Tu n’as encore aucune quête active. Les quêtes journalières,
            hebdomadaires et bonus apparaîtront ici plus tard.
          </p>
        {% endif %}
      </div>
    </aside>

  </div><!-- /layout -->

</div><!-- /wrapper -->
{% endblock %}


{% block extra_scripts %}
  <!-- Village quests logic (UI only for now) -->
  <script src="{{ url_for('static', filename='GAME_UI/js/village/village_quests.js') }}"></script>
{% endblock %}
