{# app/templates/game/index.html #}
{% extends "base.html" %}

{% block title %}Lodyland â€” Jeu{% endblock %}

{% block content %}
<div class="row g-3">

  <!-- ===================================================== -->
  <!--  COL GAUCHE : Auth + Player                          -->
  <!-- ===================================================== -->
  <div class="col-12 col-lg-4">

    <!-- Auth -->
    <div class="card mb-3">
      <div class="card-body">
        <h5 class="card-title">Connexion</h5>

        <div class="mb-2">
          <label class="form-label">Nom du joueur</label>
          <input
            id="playNameInput"
            class="form-control"
            placeholder="ex: Lloyd"
          />
        </div>

        <div class="d-flex flex-wrap gap-2 mb-2">
          <button
            id="playRegisterBtn"
            class="btn btn-primary btn-sm"
            type="button"
          >
            Register
          </button>
          <button
            id="playLoginBtn"
            class="btn btn-outline-primary btn-sm"
            type="button"
          >
            Login
          </button>
          <button
            id="playLogoutBtn"
            class="btn btn-outline-secondary btn-sm"
            type="button"
          >
            Logout
          </button>
        </div>

        <div
          id="playAuthBox"
          class="small text-muted font-monospace"
        >
          Not connected.
        </div>
      </div>
    </div>

    <!-- Player -->
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Player</h5>
        <pre
          id="playPlayerBox"
          class="bg-body-secondary p-2 rounded small mb-2"
        >No player.</pre>

        <div class="progress" aria-label="XP progress">
          <div
            id="playXpFill"
            class="progress-bar"
            style="width: 0%;"
          ></div>
        </div>
        <div class="d-flex justify-content-between small mt-1 text-muted">
          <span id="playXpTextLeft" class="font-monospace">XP: 0</span>
          <span id="playXpTextRight" class="font-monospace">0%</span>
        </div>
      </div>
    </div>

  </div>

  <!-- ===================================================== -->
  <!--  COL DROITE : Grid + Inventory (placeholder)         -->
  <!-- ===================================================== -->
  <div class="col-12 col-lg-8">
    <div class="row g-3">

      <!-- Tiles (grid) -->
      <div class="col-12">
        <div class="card h-100">
          <div class="card-body">
            <h5 class="card-title">Tiles</h5>
            <div
              id="playGridBox"
              class="row row-cols-2 row-cols-md-3 g-2"
            >
              <div class="col">
                <div class="text-muted small">
                  No player. Please register or login.
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Inventory + Sell -->
      <div class="col-12">
        <div class="card h-100">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <h5 class="card-title mb-0">Inventory</h5>
              <button
                id="playInventoryRefreshBtn"
                class="btn btn-outline-secondary btn-sm"
                type="button"
              >
                Refresh
              </button>
            </div>

            <div
              id="playInventoryBox"
              class="row row-cols-2 row-cols-md-4 g-2 mb-3"
            >
              <div class="col small text-muted">Inventaire vide.</div>
            </div>

            <hr class="my-3">

            <h6 class="mb-2">Sell to NPC</h6>
            <div class="row g-2 align-items-end">
              <div class="col-12 col-md-4">
                <label class="form-label">Resource</label>
                <select id="playSellResource" class="form-select">
                  <option value="branch">branch</option>
                  <option value="palm_leaf">palm_leaf</option>
                  <option value="wood">wood</option>
                  <option value="stone">stone</option>
                </select>
              </div>
              <div class="col-6 col-md-3">
                <label class="form-label">Qty</label>
                <input
                  id="playSellQty"
                  class="form-control"
                  value="1"
                />
              </div>
              <div class="col-6 col-md-3 d-grid">
                <button
                  id="playSellBtn"
                  class="btn btn-outline-primary"
                  type="button"
                >
                  Sell
                </button>
              </div>
            </div>

            <div
              id="playSellBox"
              class="small text-muted mt-2 font-monospace"
            >
              Ready.
            </div>

          </div>
        </div>
      </div>

    </div>
  </div>

</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/game.js') }}"></script>
{% endblock %}
